<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Preparação para Redação EAOAP</title>
    <!-- Chosen Palette: Slate & Amber -->
    <!-- Application Structure Plan: A single-page dashboard designed for strategic study. It begins with a summary of the exam's evaluation criteria presented as clear cards. The core is an interactive horizontal bar chart visualizing the probability of different thematic clusters. Clicking on a theme in the chart dynamically displays detailed analysis and sub-topics in a dedicated section below. The final section provides actionable study recommendations. A new section is added for an AI-powered argumentation point generator, allowing users to select a theme and receive generated arguments. This structure transforms the linear report into an exploratory tool, allowing candidates to quickly grasp priorities and delve into specifics as needed, enhancing usability and engagement. -->
    <!-- Visualization & Content Choices: Report Info: Exam evaluation criteria -> Goal: Inform -> Viz/Method: Styled cards with icons (HTML/CSS) for quick scanning. Interaction: Hover effects. Report Info: Thematic probability matrix -> Goal: Compare & Guide -> Viz/Method: Interactive horizontal bar chart (Chart.js/Canvas) to visually rank themes. Interaction: Clicks on chart bars filter the detailed content view. Report Info: Detailed theme analysis -> Goal: Organize & Inform -> Viz/Method: Dynamically updated content blocks (JS-controlled divs). Interaction: Content is revealed based on chart selection. Report Info: Argumentation point generation -> Goal: Assist in content creation -> Viz/Method: Dropdown for theme selection, button to trigger LLM call, and a list to display generated points (HTML/CSS/JS). Interaction: User selects theme, clicks button, AI generates points. This design avoids static data presentation and promotes active exploration and content generation. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .content-fade {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
        }
        .content-fade.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="text-slate-700">

    <!-- Header & Navigation -->
    <header class="bg-slate-800 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-amber-400">Análise Estratégica EAOAP</h1>
            <nav class="hidden md:flex space-x-6 font-medium">
                <a href="#padroes" class="hover:text-amber-400 transition-colors">Padrões</a>
                <a href="#probabilidade" class="hover:text-amber-400 transition-colors">Probabilidade</a>
                <a href="#temas" class="hover:text-amber-400 transition-colors">Temas</a>
                <a href="#gerador-argumentos" class="hover:text-amber-400 transition-colors">Gerador ✨</a>
                <a href="#recomendacoes" class="hover:text-amber-400 transition-colors">Recomendações</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- Introduction -->
        <section id="intro" class="text-center mb-16">
            <h2 class="text-4xl font-extrabold text-slate-800 mb-4">Painel de Preparação para a Redação EAOAP</h2>
            <p class="max-w-3xl mx-auto text-lg text-slate-600">
                Esta é uma ferramenta interativa projetada para otimizar seus estudos. Explore os critérios de avaliação, analise a probabilidade dos temas mais relevantes e aprofunde-se nas áreas de interesse estratégico da Força Aérea Brasileira (FAB) para alcançar o sucesso na sua prova.
            </p>
        </section>

        <!-- Section 1: Exam Standards -->
        <section id="padroes" class="mb-16">
            <h3 class="text-3xl font-bold text-slate-800 text-center mb-2">Padrões e Critérios de Avaliação</h3>
            <p class="text-center text-slate-600 mb-10 max-w-2xl mx-auto">A redação do EAOAP avalia sua capacidade de argumentação, profundidade de conhecimento e domínio da língua portuguesa. Entenda os pilares da correção e suas penalidades para não perder pontos cruciais.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Expression Card -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-slate-500 hover:shadow-xl transition-shadow">
                    <h4 class="text-xl font-bold text-slate-800 mb-2">Expressão</h4>
                    <p class="text-slate-600 mb-4">Avalia a correção gramatical e clareza. Inclui pontuação, ortografia, vocabulário e morfossintaxe.</p>
                    <div class="text-2xl font-bold text-red-500 bg-red-100 rounded-lg p-3 text-center">-0,2000 pts</div>
                    <p class="text-sm text-slate-500 mt-2 text-center">por cada erro cometido.</p>
                </div>
                <!-- Structure Card -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-slate-500 hover:shadow-xl transition-shadow">
                    <h4 class="text-xl font-bold text-slate-800 mb-2">Estrutura</h4>
                    <p class="text-slate-600 mb-4">Foco na organização lógica do texto, principalmente a correta divisão em parágrafos.</p>
                    <div class="text-2xl font-bold text-orange-500 bg-orange-100 rounded-lg p-3 text-center">Até -0,5000 pts</div>
                     <p class="text-sm text-slate-500 mt-2 text-center">por erro de paragrafação.</p>
                </div>
                <!-- Content Card -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-slate-500 hover:shadow-xl transition-shadow">
                    <h4 class="text-xl font-bold text-slate-800 mb-2">Conteúdo</h4>
                    <p class="text-slate-600 mb-4">O pilar mais importante. Avalia a pertinência ao tema, a qualidade da argumentação e a informatividade.</p>
                    <div class="text-2xl font-bold text-green-600 bg-green-100 rounded-lg p-3 text-center">Até -4,0000 pts</div>
                     <p class="text-sm text-slate-500 mt-2 text-center">no total dos três quesitos.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Thematic Probability Dashboard -->
        <section id="probabilidade" class="mb-16 bg-white p-6 md:p-8 rounded-2xl shadow-lg">
            <h3 class="text-3xl font-bold text-slate-800 text-center mb-2">Matriz de Probabilidade dos Temas</h3>
            <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">Com base nos últimos exames e no alinhamento estratégico da FAB, este gráfico visualiza os clusters temáticos com maior probabilidade de serem abordados. <strong class="text-amber-600">Clique em uma barra</strong> para explorar os detalhes do tema.</p>
            <div class="chart-container h-96 md:h-[450px]">
                <canvas id="temasChart"></canvas>
            </div>
        </section>

        <!-- Section 3: Detailed Theme Exploration -->
        <section id="temas" class="min-h-[500px]">
            <div id="tema-placeholder" class="text-center py-20">
                <h3 class="text-2xl font-bold text-slate-700 mb-4">Explore os Temas em Detalhe</h3>
                <p class="text-slate-500 text-lg max-w-xl mx-auto">Selecione um cluster temático no gráfico acima para ver a análise aprofundada, subtemas relevantes e sua conexão com as prioridades da Força Aérea Brasileira.</p>
                 <div class="mt-8 text-6xl text-slate-300">✈️</div>
            </div>
            <div id="tema-detalhes" class="hidden">
                 <h3 id="detalhe-titulo" class="text-3xl font-bold text-slate-800 text-center mb-10"></h3>
                 <div id="detalhe-conteudo"></div>
            </div>
        </section>

        <!-- Section 4: Argumentation Points Generator -->
        <section id="gerador-argumentos" class="mt-16 pt-16 border-t border-slate-200 bg-white p-6 md:p-8 rounded-2xl shadow-lg">
            <h3 class="text-3xl font-bold text-slate-800 text-center mb-2">Gerador de Pontos de Argumentação ✨</h3>
            <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">Utilize a inteligência artificial para gerar pontos de argumentação concisos e relevantes para o tema que você está estudando. Uma ferramenta essencial para aprofundar seu repertório e estruturar suas ideias.</p>
            
            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 mb-8">
                <label for="temaSelect" class="text-lg font-medium text-slate-700">Escolha um Tema:</label>
                <select id="temaSelect" class="p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-slate-700">
                    <!-- Options will be populated by JavaScript -->
                </select>
                <button id="gerarArgumentosBtn" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-colors flex items-center justify-center space-x-2">
                    <span>Gerar Pontos de Argumentação ✨</span>
                </button>
            </div>

            <div id="loadingSpinner" class="hidden text-center mt-6">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-slate-500 mx-auto"></div>
                <p class="text-slate-500 mt-2">Gerando ideias...</p>
            </div>

            <div id="errorContainer" class="text-red-500 text-center mt-4 hidden">
                Ocorreu um erro ao gerar os pontos de argumentação. Tente novamente mais tarde.
            </div>

            <div id="argumentosGerados" class="mt-8 bg-slate-50 p-6 rounded-lg border border-slate-200 hidden">
                <h4 class="text-xl font-bold text-slate-800 mb-4 text-center">Pontos Gerados:</h4>
                <ul id="argumentosList" class="list-disc pl-5 space-y-2 text-slate-700">
                    <!-- Generated arguments will be displayed here -->
                </ul>
            </div>
        </section>


        <!-- Section 5: Strategic Recommendations -->
        <section id="recomendacoes" class="mt-16 pt-16 border-t border-slate-200">
            <h3 class="text-3xl font-bold text-slate-800 text-center mb-2">Recomendações Estratégicas</h3>
            <p class="text-center text-slate-600 mb-10 max-w-2xl mx-auto">Siga estes passos para construir uma preparação sólida e assertiva, focando no que realmente importa para a prova de redação do EAOAP.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-amber-500">
                    <h4 class="text-xl font-bold text-slate-800 mb-2">Aprofunde-se nas Atualidades</h4>
                    <p class="text-slate-600">Vá além das manchetes. Consulte fontes oficiais da FAB e do Ministério da Defesa. Entenda os projetos estratégicos (VLM-1, Programa SIRIUS) e o contexto geopolítico que os envolvem.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-amber-500">
                    <h4 class="text-xl font-bold text-slate-800 mb-2">Desenvolva sua Argumentação</h4>
                    <p class="text-slate-600">Para cada tema, colete dados e exemplos concretos. Pratique a estruturação de argumentos lógicos. Use as informações deste painel para criar um repertório informativo e relevante para a prova.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-amber-500">
                    <h4 class="text-xl font-bold text-slate-800 mb-2">Pratique e Revise com Rigor</h4>
                    <p class="text-slate-600">Redija textos sob condições de tempo simuladas. Peça feedback e, principalmente, revise sua própria escrita com foco nos critérios de "Expressão". Cada erro evitado é um passo mais perto da aprovação.</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-white mt-16">
        <div class="container mx-auto p-6 text-center text-slate-400">
            <p>&copy; 2025 Painel de Preparação Estratégica. Ferramenta de apoio ao candidato EAOAP.</p>
        </div>
    </footer>

    <script>
        const appData = {
            temas: [
                {
                    cluster: 'Inteligência Artificial (IA)',
                    probabilidade: 95,
                    probabilidade_label: 'Alta',
                    cor: 'rgba(59, 130, 246, 0.7)',
                    corBorda: 'rgba(59, 130, 246, 1)',
                    conteudo: `
                        <div class="space-y-6">
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">IA na Tomada de Decisão e Operações</h5>
                                <p class="text-slate-600">O Brasil busca uma "IA Soberana", essencial para a autonomia e segurança. Para a FAB, isso significa sistemas de inteligência, vigilância e reconhecimento (ISR) seguros e não vulneráveis a controles externos, impactando diretamente a soberania nacional.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Desafios Éticos e Regulatórios</h5>
                                <p class="text-slate-600">A integração da IA na defesa levanta debates sobre armas autônomas (LAWS), diretrizes éticas em conflitos e a segurança contra ciberataques. A redação pode exigir uma análise desses marcos regulatórios e dilemas morais.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Futuro do Trabalho e Formação na FAB</h5>
                                <p class="text-slate-600">A IA redefinirá funções, exigindo novas habilidades. O tema pode explorar como a FAB prepara seu capital humano para este futuro, focando em aprendizagem contínua, adaptabilidade e qualidades humanas insubstituíveis, como liderança e intuição estratégica.</p>
                            </div>
                        </div>
                    `
                },
                {
                    cluster: 'Cibersegurança',
                    probabilidade: 90,
                    probabilidade_label: 'Alta',
                    cor: 'rgba(239, 68, 68, 0.7)',
                    corBorda: 'rgba(239, 68, 68, 1)',
                    conteudo: `
                         <div class="space-y-6">
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Ameaças e Resiliência de Infraestruturas</h5>
                                <p class="text-slate-600">A intensa atividade do Centro de Defesa Cibernética da Aeronáutica (CDCAER) e a participação em exercícios como CRUZEX CYBER e Locked Shields (OTAN) mostram que a cibersegurança é uma prioridade máxima, garantindo a continuidade das operações aéreas e de comando.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Ciberdefesa na Guerra Moderna</h5>
                                <p class="text-slate-600">A integração de operações cibernéticas em grandes exercícios aéreos revela uma mudança de doutrina: a guerra cibernética é parte intrínseca das operações aéreas. O tema pode abordar operações multidomínio e a fusão entre o conflito físico e digital.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">A Fronteira Quântica</h5>
                                <p class="text-slate-600">A menção a "tecnologias quânticas" como a próxima fronteira para criptografia demonstra uma visão de futuro. A redação pode explorar as implicações da computação quântica para a segurança nacional e a necessidade de investimento em pesquisa avançada.</p>
                            </div>
                        </div>
                    `
                },
                {
                    cluster: 'Desenvolvimento Espacial',
                    probabilidade: 85,
                    probabilidade_label: 'Alta',
                    cor: 'rgba(245, 158, 11, 0.7)',
                    corBorda: 'rgba(245, 158, 11, 1)',
                    conteudo: `
                         <div class="space-y-6">
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Avanços no Programa Espacial Brasileiro</h5>
                                <p class="text-slate-600">A "Operação Potiguar", com o lançamento do foguete VS30, e o desenvolvimento do VLM-1, representam o impulso do Brasil por autonomia e competitividade no mercado espacial global. O tema pode focar na soberania nacional no espaço e nos benefícios estratégicos de um programa independente.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Aplicações em Defesa e Monitoramento</h5>
                                <p class="text-slate-600">A tecnologia espacial é vital para inteligência, vigilância e reconhecimento (ISR). O tema pode explorar como o Brasil usa suas capacidades para controle de fronteiras, proteção da Amazônia e gerenciamento de desastres, tudo com implicações diretas na defesa.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Brasil no Cenário Aeroespacial Global</h5>
                                <p class="text-slate-600">A ambição de competir no mercado global levanta questões sobre cooperação internacional, parcerias tecnológicas e os desafios de se estabelecer em um domínio altamente competitivo. A redação pode abordar as implicações geopolíticas do poder espacial.</p>
                            </div>
                        </div>
                    `
                },
                {
                    cluster: 'Tecnologias Emergentes',
                    probabilidade: 75,
                    probabilidade_label: 'Média-Alta',
                    cor: 'rgba(16, 185, 129, 0.7)',
                    corBorda: 'rgba(16, 185, 129, 1)',
                    conteudo: `
                         <div class="space-y-6">
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Tecnologias Quânticas</h5>
                                <p class="text-slate-600">O investimento proativo das Forças Armadas em tecnologias quânticas (para criptografia e computação) sinaliza uma visão de longo prazo. O tema pode explorar o potencial disruptivo, a necessidade de adoção precoce e os desafios de desenvolver tais capacidades no Brasil.</p>
                            </div>
                             <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Veículos Hipersônicos</h5>
                                <p class="text-slate-600">O desenvolvimento de aeronaves hipersônicas pela FAB representa uma mudança de paradigma no poder aéreo. A redação pode discutir as vantagens estratégicas (velocidade, dissuasão) e como essa tecnologia pode remodelar o combate aéreo e as estratégias de defesa.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Autonomia Tecnológica e Soberania</h5>
                                <p class="text-slate-600">A colaboração entre Forças Armadas, academia e indústria é vista como fundamental para desenvolver "tecnologias críticas" e manter a "soberania nacional". O tema pode focar na importância da P&D doméstica e na redução da dependência de fornecedores estrangeiros.</p>
                            </div>
                        </div>
                    `
                },
                {
                    cluster: 'Sustentabilidade e Meio Ambiente',
                    probabilidade: 60,
                    probabilidade_label: 'Média',
                    cor: 'rgba(139, 92, 246, 0.7)',
                    corBorda: 'rgba(139, 92, 246, 1)',
                    conteudo: `
                         <div class="space-y-6">
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Proteção Ambiental como Missão</h5>
                                <p class="text-slate-600">A doutrina da FAB inclui "defender, preservar e recuperar o meio ambiente". A atuação na Amazônia e programas como o SIRIUS (redução de emissões) mostram que a proteção ambiental está integrada à missão operacional e à defesa da soberania.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Eficiência Energética e Energias Renováveis</h5>
                                <p class="text-slate-600">O uso de energia solar em destacamentos e a adoção de práticas sustentáveis em novas construções demonstram um ganho estratégico. O tema pode abordar segurança energética, redução de custos e de encargos logísticos como vantagens para a prontidão militar.</p>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg mb-2 text-slate-700">Desafios Climáticos e Segurança</h5>
                                 <p class="text-slate-600">As mudanças climáticas, impactando recursos como água e alimentos, são cada vez mais vistas como ameaças à segurança nacional. A redação pode explorar o conceito de "segurança climática" e o papel das Forças Armadas na mitigação de seus impactos.</p>
                            </div>
                        </div>
                    `
                },
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            const ctx = document.getElementById('temasChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: appData.temas.map(t => t.cluster),
                    datasets: [{
                        label: 'Probabilidade Qualitativa',
                        data: appData.temas.map(t => t.probabilidade),
                        backgroundColor: appData.temas.map(t => t.cor),
                        borderColor: appData.temas.map(t => t.corBorda),
                        borderWidth: 2,
                        borderRadius: 5,
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        const tema = appData.temas[context.dataIndex];
                                        label += `${tema.probabilidade_label} (${context.parsed.x}%)`;
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                display: false,
                                drawBorder: false,
                            },
                             ticks: {
                                callback: function(value) {
                                    return value + '%';
                                },
                                font: {
                                    weight: 'bold'
                                }
                            }
                        },
                        y: {
                            grid: {
                                display: false,
                                drawBorder: false,
                            },
                            ticks: {
                                font: {
                                    size: 14,
                                    weight: '500'
                                },
                                color: '#334155' // slate-700
                            }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const temaSelecionado = appData.temas[index];
                            displayTemaDetalhes(temaSelecionado);
                        }
                    },
                     onHover: (event, chartElement) => {
                        event.native.target.style.cursor = chartElement[0] ? 'pointer' : 'default';
                    }
                }
            });

            const placeholderDiv = document.getElementById('tema-placeholder');
            const detalhesDiv = document.getElementById('tema-detalhes');
            const tituloDetalhe = document.getElementById('detalhe-titulo');
            const conteudoDetalhe = document.getElementById('detalhe-conteudo');
            
            function displayTemaDetalhes(tema) {
                placeholderDiv.classList.add('hidden');
                
                detalhesDiv.classList.remove('visible');
                detalhesDiv.classList.remove('content-fade');

                setTimeout(() => {
                    tituloDetalhe.textContent = tema.cluster;
                    conteudoDetalhe.innerHTML = tema.conteudo;
                    detalhesDiv.classList.remove('hidden');
                    detalhesDiv.classList.add('content-fade');
                    
                    setTimeout(() => {
                        detalhesDiv.classList.add('visible');
                    }, 50);

                    detalhesDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100); 

            }

            // Gemini API Integration - Argumentation Generator
            const temaSelect = document.getElementById('temaSelect');
            const gerarArgumentosBtn = document.getElementById('gerarArgumentosBtn');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const errorContainer = document.getElementById('errorContainer');
            const argumentosGeradosDiv = document.getElementById('argumentosGerados');
            const argumentosList = document.getElementById('argumentosList');

            // Populate the theme dropdown
            appData.temas.forEach(tema => {
                const option = document.createElement('option');
                option.value = tema.cluster;
                option.textContent = tema.cluster;
                temaSelect.appendChild(option);
            });

            gerarArgumentosBtn.addEventListener('click', async () => {
                const selectedTheme = temaSelect.value;
                if (!selectedTheme) {
                    errorContainer.textContent = 'Por favor, selecione um tema.';
                    errorContainer.classList.remove('hidden');
                    argumentosGeradosDiv.classList.add('hidden');
                    return;
                }

                loadingSpinner.classList.remove('hidden');
                errorContainer.classList.add('hidden');
                argumentosGeradosDiv.classList.add('hidden');
                argumentosList.innerHTML = ''; // Clear previous arguments

                const prompt = `Gere 5 pontos de argumentação concisos e relevantes para uma redação sobre "${selectedTheme} na Força Aérea Brasileira", considerando aspectos estratégicos, desafios e oportunidades. Cada ponto deve ser uma frase ou parágrafo curto.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: { "type": "STRING" }
                        }
                    }
                };

                const apiKey = "AIzaSyB7AyliYun2KKB2HA-Ui3M1gOFk7bLPyHM"; // If you want to use models other than gemini-2.0-flash or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const json = result.candidates[0].content.parts[0].text;
                        const parsedJson = JSON.parse(json);

                        if (Array.isArray(parsedJson)) {
                            parsedJson.forEach(arg => {
                                const li = document.createElement('li');
                                li.textContent = arg;
                                argumentosList.appendChild(li);
                            });
                            argumentosGeradosDiv.classList.remove('hidden');
                            argumentosGeradosDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        } else {
                            errorContainer.textContent = 'Formato de resposta inesperado da IA. Tente novamente.';
                            errorContainer.classList.remove('hidden');
                        }
                    } else {
                        errorContainer.textContent = 'Não foi possível gerar os pontos de argumentação. Tente novamente.';
                        errorContainer.classList.remove('hidden');
                    }
                } catch (error) {
                    errorContainer.textContent = 'Erro de conexão com o servidor. Verifique sua rede e tente novamente.';
                    errorContainer.classList.remove('hidden');
                    console.error('Erro ao chamar a API Gemini:', error);
                } finally {
                    loadingSpinner.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
